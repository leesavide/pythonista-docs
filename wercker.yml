box: python:3.5-slim
build:
  steps:
    - virtualenv:
        name: setup virtual environment
        install_wheel: true
    - pip-install -r requirements.txt
    - script:
        name: build docset
        code: |
          pip install virtualenv
          mkdir _build
          doc2dash -fv --name Pythonista -d _build -i icon.png --index-page index.html Pythonista
          cp icon@2x.png _build/Pythonista.docset
          cd _build && tar --exclude='.DS_Store' -cvzf Pythonista.tgz Pythonista.docset
